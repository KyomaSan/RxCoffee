(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-325e8d49"],{"2f14":function(e,t,s){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}s.d(t,"a",(function(){return l}));var i=s("d399"),a=function(){function e(){o(this,e)}return r(e,[{key:"RegIpt",value:function(e){for(var t in e)if(!e[t].reg.test(e[t].value))return Object(i["a"])({message:e[t].errorMsg,forbidClick:!0}),!1;return!0}}]),e}(),l=new a},"56f5":function(e,t,s){},a55b:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-box"},[s("div",{staticClass:"login-top-box"},[s("van-nav-bar",{attrs:{title:"登录","left-arrow":""},scopedSlots:e._u([{key:"left",fn:function(){return[s("van-icon",{attrs:{name:"arrow-left",size:"17px",color:"#000"}})]},proxy:!0},{key:"right",fn:function(){return[s("div",{staticClass:"right-content",on:{click:e.goto}},[e._v("先逛一逛")])]},proxy:!0}])})],1),s("TopBackground"),e._m(0),s("div",{staticClass:"form"},[s("div",{staticClass:"ipt-form"},[s("van-form",[s("van-cell-group",[s("van-field",{attrs:{label:"手机号","left-icon":"phone-o",placeholder:"请输入手机号"},model:{value:e.userLoginInfo.userphone,callback:function(t){e.$set(e.userLoginInfo,"userphone",t)},expression:"userLoginInfo.userphone"}}),s("van-field",{attrs:{clearable:"",label:"密码",type:e.isText?"text":"password","left-icon":"edit","right-icon":e.isText?"eye-o":"closed-eye",placeholder:"请输入密码"},on:{"click-right-icon":e.isShowText},model:{value:e.userLoginInfo.password,callback:function(t){e.$set(e.userLoginInfo,"password",t)},expression:"userLoginInfo.password"}})],1),s("div",{staticClass:"forget"},[s("span",{on:{click:e.showFindPass}},[e._v("忘记密码?")])])],1)],1)]),s("div",{staticClass:"btns"},[s("div",{staticClass:"login-btn"},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:e.regLogin}},[e._v("登 录")])],1),s("div",{staticClass:"registered-btn"},[s("van-button",{attrs:{block:"",round:"",type:"default"},on:{click:e.isShowPopup}},[e._v("注 册")])],1)]),s("van-popup",{attrs:{round:"",closeable:"",position:"bottom"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[s("div",{staticClass:"form-box"},[s("van-form",[s("van-cell-group",[s("van-field",{attrs:{label:"用户名","left-icon":"user-circle-o",placeholder:"请输入用户名"},model:{value:e.userRegiterInfo.nickName,callback:function(t){e.$set(e.userRegiterInfo,"nickName",t)},expression:"userRegiterInfo.nickName"}}),s("van-field",{attrs:{label:"手机号","left-icon":"phone-o",placeholder:"请输入手机号"},model:{value:e.userRegiterInfo.userphone,callback:function(t){e.$set(e.userRegiterInfo,"userphone",t)},expression:"userRegiterInfo.userphone"}}),s("van-field",{attrs:{clearable:"",label:"密码",type:e.isText?"text":"password","left-icon":"edit","right-icon":e.isText?"eye-o":"closed-eye",placeholder:"请输入密码"},on:{"click-right-icon":e.isShowText},model:{value:e.userRegiterInfo.password,callback:function(t){e.$set(e.userRegiterInfo,"password",t)},expression:"userRegiterInfo.password"}})],1),s("div",{staticClass:"registered-btn"},[s("van-button",{attrs:{block:"",round:"",type:"default"},on:{click:e.registered}},[e._v("注 册")])],1)],1)],1)])],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wel"},[s("span",{staticClass:"wel-text"},[e._v("欢迎回来!")]),s("span",{staticClass:"please"},[e._v("先登录一下吧")])])}],r=(s("c25d"),s("2f14")),i=s("e4d7"),a={name:"Login",components:{TopBackground:i["a"]},data:function(){return{userLoginInfo:{userphone:"",password:""},userRegiterInfo:{userphone:"",nickName:"",password:""},isShow:!1,isText:!1}},methods:{goto:function(){this.$router.push({name:"Home"})},isShowPopup:function(){this.isShow=!0},isShowText:function(){this.isText=!this.isText},regLogin:function(){var e=this,t={phone:{value:this.userLoginInfo.userphone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},password:{value:this.userLoginInfo.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码支持数字字母下划线且必须为字母开头"}};r["a"].RegIpt(t)&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:this.baseURL+"/login",data:{appkey:this.appkey,password:this.userLoginInfo.password,phone:this.userLoginInfo.userphone}}).then((function(t){e.$toast.clear(),200===t.data.code?(e.$cookies.set("tokenString",t.data.token,"1d"),e.$router.push({name:"Home"})):e.$toast({message:t.data.msg,forbidClick:!0,duration:5e3})})))},registered:function(){var e=this,t={userphone:{value:this.userRegiterInfo.userphone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号码格式不正确"},username:{value:this.userRegiterInfo.username,reg:/^[\u4e00-\u9fa5A-Z-a-z0-9]{1,10}$/,errorMsg:"用户名支持汉字、数字、字母"},password:{value:this.userRegiterInfo.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码支持数字字母下划线且要以字母开头"}};r["a"].RegIpt(t)&&(this.$toast.loading({message:"验证中...",forbidClick:!0}),this.axios({method:"post",url:this.baseURL+"/register",data:{appkey:this.appkey,nickName:this.userRegiterInfo.nickName,password:this.userRegiterInfo.password,phone:this.userRegiterInfo.userphone}}).then((function(t){if(100==t.data.code)for(var s in e.$toast.loading({message:t.data.msg,forbidClick:!0,duration:5e3}),e.isShow=!1,e.userRegiterInfo)e.userRegiterInfo[s]="";else e.$toast({message:t.data.msg,forbidClick:!0,duration:5e3});console.log(t),e.$toast.clear()})).catch((function(t){e.$toast.clear(),console.log(t)})))},showFindPass:function(){this.$router.push({name:"Findpass"})}}},l=a,c=s("2877"),u=Object(c["a"])(l,o,n,!1,null,null,null);t["default"]=u.exports},b7e6:function(e,t,s){"use strict";s("56f5")},c25d:function(e,t,s){},e4d7:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"topBackground"},[s("div",{staticClass:"img-box"})])}],r={name:"TopBackground"},i=r,a=(s("b7e6"),s("2877")),l=Object(a["a"])(i,o,n,!1,null,"a239ad60",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-325e8d49.2970f48b.js.map